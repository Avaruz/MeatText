<!DOCTYPE html>
<html>
    
    <head> 
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="format-detection" content="telephone=no" />
        <link rel="stylesheet" type="text/css" href="js/geocode/Control.BingGeocoder.css"/>
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width;"/>
        <script type="text/javascript" src="cordova-2.0.0.js"></script>
        <script type="text/javascript" src="js/jquery.js"></script>
        
        <script type="text/javascript" src="js/jquery.mobile.js"></script>
        <script type="text/javascript" src="js/leaflet/leaflet.js"></script>
        <link rel="stylesheet" type="text/css" href="js/leaflet/leaflet.css" />
        <script type="text/javascript" src="js/leaflet/L.zoomTMSLayer.js"></script>
        <link rel="stylesheet" type="text/css" href="css/index.css" />
        <link rel="stylesheet" type="text/css" href="css/jqm.css" />
        <script type="text/javascript" src="js/sms/SMSComposer.js"></script>
        <script type="text/javascript" src="js/EmailComposer.js"></script>
        <script type="text/javascript" src="js/TwitterPlugin.js"></script>
        <script type="text/javascript" src="js/geocode/Control.BingGeocoder.js"></script>
        <script type="text/javascript" src="js/leaflet/bing.js"></script>
        <script type="text/javascript" src="js/cache.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
    </head>
<body onLoad="initFastButtons();">
    <span id="fastclick">
        <script type="text/javascript">
        $(document).ready(function(){
        $("#footer").slideUp(0);
        $("#settingsFooter").slideUp(0);

        $('#mytext').attr('data-ajax', 'false');
        $('#mytext').attr('class', 'false');
        $.mobile.ajaxEnabled=false

        });
        
$(document).bind("mobileinit", function(){
        $.mobile.pushStateEnabled = false;
        $.mobile.ajaxEnabled = false;
        $.mobile.hashListeningEnabled = false;
});
        </script>



<div data-role="page">
    
  
            <div data-role="footer" id="settingsFooter" data-theme="d">
               <div data-role="navbar">
                <ul>
                    <li id="button1"><a href="">Standard</a></li>
                    <li id="button2"><a href="" >Hybrid</a></li>
                    <li id="button3"><a href="">Satellite</a></li>
                </ul>
            </div><!-- /navbar -->
            </div><!-- /footer -->

        <a href="#" id="settingsButton"><img src="img/gear.png" width="20px" height="20px"></a>

        <div id="map"></div>
        
        <a href="#" id="geolocate"><img src="img/scope2.png" width="17px" height="17px"/></a>
        
        <div id="background"></div>



    <div data-role="footer" id="footer" data-theme="d">
       <div data-role="navbar">
        <ul>
            <li input onclick='ComposeSMS();' id="smsText"><a href=""><img src="img/chat.png" width="40px" height="30px" /></a></li>
            <li input onclick='emailComposer()' id="emailText"><a href=""><img src="img/email.png" width="40px" height="30px"/></a></li>
            <li input onclick='tweet()' id="twitterText"><a href=""><img src="img/twitter.png"  width="30px" height="30px"/></a></li>
        </ul>
    </div><!-- /navbar -->
    </div><!-- /footer -->



</div>

    
</div><!-- /page -->

<script type="text/javascript">
/*
var locationClick, locationPerson, vectorCircle, locationSearch

locationPerson = new L.LayerGroup();
locationClick = new L.LayerGroup();
vectorCircle = new L.LayerGroup();
locationSearch = new L.LayerGroup();

map = new L.Map('map', {layers: [locationClick, locationPerson, vectorCircle,locationSearch]});

L.Browser.retina = true;


    var mapbox = L.zoomTMSLayer({ 
        url:            'http://{s}.tiles.mapbox.com/v3/bobbysud.map-tyt3admo/',
        layername :     '',
        serviceVersion: '',
        tileMaxZoom:    17,
        maxZoom:        19,
        tms:            false,
        zoomControl: false,
        reuseTiles: true, //Panning is sticky if false
        updateWhenIdle: false, //Loads tiles during pan
        unloadInvisibleTiles: true, //slows down app is false
        detectRetina:true,
    }).addTo(map);

    var bingSat = L.zoomTMSLayer({ 
        url:            'http://{s}.tiles.mapbox.com/v3/bobbysud.map-zjt9pl97/',
        layername :     '',
        serviceVersion: '',
        tileMaxZoom:    17,
        maxZoom:        19,
        tms:            false,
        zoomControl: false,
        reuseTiles: true, //Panning is sticky if false
        updateWhenIdle: false, //Loads tiles during pan
        unloadInvisibleTiles: true, //slows down app is false
        detectRetina:true,
    })

    var bingHybrid = L.zoomTMSLayer({ 
        url:            'http://{s}.tiles.mapbox.com/v3/bobbysud.map-ddwpawil/',
        layername :     '',
        serviceVersion: '',
        tileMaxZoom:    17,
        maxZoom:        19,
        tms:            false,
        zoomControl: false,
        reuseTiles: true, //Panning is sticky if false
        updateWhenIdle: false, //Loads tiles during pan
        unloadInvisibleTiles: true, //slows down app is false
        detectRetina:true,
    })

    var bingHybrid =  new L.bingHybrid("AmFJ03ozVugKu0Y_uijzwvFEKfKY5VCesm1eiBqGhchxQ3uKFUQMYsKJLNdfHsIR",{
        maxZoom:18,
        reuseTiles: true, //Panning is sticky if false
        updateWhenIdle: false, //Loads tiles during pan
        unloadInvisibleTiles: true, //slows down app is false
        detectRetina:true,
    });

   var bingSat =  new L.bingSat("AmFJ03ozVugKu0Y_uijzwvFEKfKY5VCesm1eiBqGhchxQ3uKFUQMYsKJLNdfHsIR",{
        maxZoom:18,
        reuseTiles: true, //Panning is sticky if false
        updateWhenIdle: false, //Loads tiles during pan
        unloadInvisibleTiles: true, //slows down app is false
        detectRetina:false,
    });   


   $("#button1").click(function() {
        map.removeLayer(bingSat)
        map.removeLayer(bingHybrid);
        map.addLayer(mapbox)
        zoom = map.getZoom();
        if(zoom>17){
            map.zoomOut(1);
            map.maxZoom(17);
        }
    });

    $("#button2").click(function() {
        map.removeLayer(bingSat);
        map.removeLayer(mapbox);
        map.addLayer(bingHybrid)
    });

    $("#button3").click(function() {
        map.removeLayer(mapbox);
        map.removeLayer(bingHybrid);
        map.addLayer(bingSat)
    });



    function onLocationFound(e) {

        lat = e.latlng.lat.toFixed(7);
        lng = e.latlng.lng.toFixed(7);
        latlng = +lat + ',' + lng;
        url = "http://maps.apple.com/maps?q="+latlng;
        message = $(url)
        markerLocation = new L.LatLng(e.latlng.lat, e.latlng.lng);
        marker = new L.Marker(markerLocation, {draggable:false});
        locationPerson.clearLayers();
        locationPerson.addLayer(marker);

        var radius = e.accuracy / 2;
       circleperson = new L.circle(e.latlng, radius,{color: "#3871B9", weight: 1.5,fillOpacity:0})
       vectorCircle.clearLayers();
       vectorCircle.addLayer(circleperson);

        marker.bindPopup("<a href='#one'/><p id='sent' onclick='slide()' onload='initFastButtons()' style='color:black;text-decoration:none;'>Share Location ➤</p></a>")
            .openPopup()

        }

        function onLocationError(e) {
            map.setView(new L.LatLng(37.76718664006672, -122.42511749267578), 14);
            navigator.notification.alert("It looks like your location settings are not enabled", null, "Oops!");
        }

        map.on('locationfound', onLocationFound);
        map.on('locationerror', onLocationError);

        map.locate({
            setView: true,
            maxZoom: 16,
            enableHighAccuracy: true,
        });

    function onMapClick(e) {

        lat = e.latlng.lat.toFixed(7);
        lng = e.latlng.lng.toFixed(7);
        latlng =lat+ ',' + lng;
        url = "http://maps.apple.com/maps?q="+latlng;
        message = $(url)
        markerLocation = new L.LatLng(e.latlng.lat, e.latlng.lng);
        marker = new L.Marker(markerLocation, {draggable: true});
        locationClick.clearLayers();
        locationClick.addLayer(marker);
        marker.bindPopup("<a href='#one'/><p id='sent' onclick='slide()' onload='initFastButtons()' style='color:black;text-decoration:none;'>Share Location ➤</p></a>")
        .openPopup();

         
    };

    map.on('contextmenu', onMapClick);
  
//Geolocate    
    var geolocate = document.getElementById('geolocate');

    geolocate.onclick = function () {

        function onLocationFound(e) {

        lat = e.latlng.lat.toFixed(7);
        lng = e.latlng.lng.toFixed(7);
        latlng = +lat + ',' + lng;
        url = "http://maps.apple.com/maps?q="+latlng;
        message = $(url)
        markerLocation = new L.LatLng(e.latlng.lat, e.latlng.lng);
        marker = new L.Marker(markerLocation, {draggable:false});
        locationPerson.clearLayers();
        locationPerson.addLayer(marker);
        
        var radius = e.accuracy / 2;
       circleperson = new L.circle(e.latlng, radius,{color: "#3871B9", weight: 1.5,fillOpacity:0})
       vectorCircle.clearLayers();
       vectorCircle.addLayer(circleperson);

        marker.bindPopup("<a href='#one' /><p id='sent' onload='initFastButtons()' style='color:black;text-decoration:none;'>Share Location ➤</p></a>")

            .openPopup()

            
        };

        function onLocationError(e) {
        }

        map.on('locationfound', onLocationFound);
        map.on('locationerror', onLocationError);

        map.locate({
            setView: true,
            maxZoom: 16,
            enableHighAccuracy: true,
        });
    }

     
    //Geocoder
     var bingGeocoder = new L.Control.BingGeocoder('AmFJ03ozVugKu0Y_uijzwvFEKfKY5VCesm1eiBqGhchxQ3uKFUQMYsKJLNdfHsIR');
        map.addControl(bingGeocoder);

        
      function resetSlide(e) {
            $("#sent").click(function(){
                $("#footer").slideToggle("fast");
                $("#settingsFooter").slideUp("fast");
            });
        };


        $("#sent").click(function(){
                alert("hi")
            });


    function dragDown(){
            $("#footer").slideUp("fast");
            $("#settingsFooter").slideUp("fast");
        };

    $("#settingsButton").click(function() {
        $("#settingsFooter").slideToggle("fast");
        $("#footer").slideUp("fast");
    });

    $("#buttonDown").click(function() {
        $("#panel").slideToggle("fast");
    });


    map.on("popupopen", resetSlide);
    map.on("move", dragDown);
    map.on("click", dragDown);
*/
</script>
</span>
</body>
</html>